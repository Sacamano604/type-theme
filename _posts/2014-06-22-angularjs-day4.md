---
layout: post
title: Learning AngularJS - Day 4
---

I built my JSON file and validated it using the <a href="http://jsonlint.com/" target="_blank">JSON Lint</a> validator. I had around 25 teams with details such as their name, city, stadium, capacity, and a few others. Here’s a snippet of one of the teams so you can see the details (the whole JSON file will be available in the source files).

<script src="https://gist.github.com/Sacamano604/ce6fd44a096b95b8d9ce.js"></script>I included the website link for each team because my ultimate goal is to be able to click on the team name and have it link to the team website. I needed to learn how to link to the external JSON file. However, I could not just jump in. I needed to learn some new Angular components. The first thing I had to do was give my app a name. The goal was to apply a module and controller to the app for organization instead of using them ‘globally’. Organization is key if you have a bigger app with multiple components, so I had to get used to it right away. Not to mention you can have multiple apps within the same scope (I explain <span style="color: #ff0000;">$scope</span> below). I gave the <span style="color: #ff0000;">ng-app</span> directive, within the HTML tag, a name for our app.<script src="https://gist.github.com/Sacamano604/24beb366e9a4e2b38b4d.js"></script>

This doesn’t need to be on the HTML element, it could be on a sub element, but since we're using our app on the whole page and it was the only app we are calling I added it to the HTML tag.

From there I needed to let angular know that out football app was an angular module. Again, for organization I put my module and controller in the head element, between script tags. Of course, ideally and for best practices, you would want to have your angular app in a different file and call it. But we were making a small app here and for now I'll keep everything on the index page. This I where I declared my angular module.

<script src="https://gist.github.com/Sacamano604/29502b71d77219a375c0.js"></script>Within the line to declare the angular module we have to pass it arguments. The first argument <span style="color: #ff0000;">‘footballApp’</span>, is the name of the <span style="color: #ff0000;">ng-app</span> we declared above, I'm only giving the variable the same name for continuity. The second part ‘<span style="color: #ff0000;">[]</span>’ is where I would declare the list of dependencies. So right now we don't have any dependencies, but I'm guessing in the future we will need to. To define a controller within this module, I call <span style="color: #ff0000;">footballApp.controller </span>...<span style="color: #ff0000;">footballApp</span> being the variable we just declared. Within that I give it name of ‘<span style="color: #ff0000;">footballController</span>’, and then give it a second argument of a function. So our controller will essentially perform a function for us.<script src="https://gist.github.com/Sacamano604/c183dfb27e7aacf57550.js"></script>

<span style="color: #ff0000;">$scope</span> object is the model of angular, it’s just a plain javascript object in terms of the way you manipulate it. From my understanding, the <span style="color: #ff0000;">$scope</span> in relation to this function is to perform the function within the ‘scope’ of the controller (I would appreciate some feedback if I don't understand this 100%). So far so good, but I still needed to link to the JSON file and call it. For this I'll paste in the code I have working, and explain the components.

<script src="https://gist.github.com/Sacamano604/0e3541fc4f63240e2ceb.js"></script>The first line of code we've covered but there’s a new element I've added, <span style="color: #ff0000;">$http</span>. The line ‘<span style="color: #ff0000;">function($scope, $http)</span>’ is angular’s dependency injection mechanism at work. By calling <span style="color: #ff0000;">$http</span>, angular gives us the <span style="color: #ff0000;">$http</span> module which is a wrapper for ‘XMLHttpRequest’ (this fetches data from remote resources, which is the basis for AJAX). So we’re asking the <span style="color: #ff0000;">$http</span> module to fetch the JSON file for us and upon a ‘success’ of that fetch, perform a callback function which passes the parsed JSON file. Unlike yesterday (with the manual array I entered), the data is not coming from the ‘teams’ array...today the array is coming from the array data from the file (I hope that makes sense). Alright, we were linking to our external JSON file and we put the data from the file into the scope. Now I needed to call this information. Yesterday, we called the array through <span style="color: #ff0000;">ng-init</span> in our first div tag. But today we will replace that with the controller name!<script src="https://gist.github.com/Sacamano604/9e80ef3bfe1409b7263d.js"></script>

Already much, much cleaner. Now that the data was linked externally and called upon, the heavy lifting was done. Here’s the table I created.

<script src="https://gist.github.com/Sacamano604/a2dbc9e7a893dcbe5a3b.js"></script>I had given the headers each the proper names and, of course, put the <span style="color: #ff0000;">ng-repeat</span> directive in the table row tag. Let’s not forget, we could still also sort by the input in the text field so I left it in. I had problem..even though I had it running on a web server, it wasn’t working. I knew because I was using the <span style="color: #ff0000;">$http</span> module I needed to run it off a web server or it wouldn't work, so that wasn't the problem. It was the fact that I was calling the script with the angular module in it BEFORE I was calling for AngularJS itself. I had to either move my script link to AngularJS in the header (not recommended), or move the controller to another file and call it at the bottom of the page. This is also a ‘best practice’ so I made the change. Here is what my <span style="color: #ff0000;">footballApp.js</span> file looked like:<script src="https://gist.github.com/Sacamano604/cb16d3e6358036f9a76a.js"></script>

And here’s how I linked to it in the html file:

<script src="https://gist.github.com/Sacamano604/33c0ff78f86575ef4ebf.js"></script>My table was outputting and all the data was there, except the teams’ website links. Earlier I said I would like to create a link on each of the team names and when clicked would take you to the website. All I needed to do was wrap the team name in a link tag and point it to the ‘<span style="color: #ff0000;">websiteLink</span>’ value in the JSON file.<script src="https://gist.github.com/Sacamano604/53649d7d502468b7b61b.js"></script>

I wanted to make it so the table can be sorted by clicking on each of the headers. So you could sort by team name, year founded, stadium capacity, etc. I had to put a sort field property on the scope, so I gave it the name of the team to sort by default.

<script src="https://gist.github.com/Sacamano604/695ffece88ddd5c57054.js"></script>From there I had to call it as a filter. So in my <span style="color: #ff0000;">ng-repeat</span> directive I added the <span style="color: #ff0000;">orderBy</span> filter that we've seen before.<script src="https://gist.github.com/Sacamano604/3e805be315b1e1ba64c3.js"></script>

It was working and sorting alphabetically based on the team name. Almost there. I had to add links to each of the heading tags in order for those to be clickable and sortable. I had to learn about something new, <span style="color: #ff0000;">ng-click</span> but here’s the code I ended up with:

<script src="https://gist.github.com/Sacamano604/6c70f1540062c40ee0f7.js"></script>I have the <span style="color: #ff0000;">href</span> in there to make it look like a link, so you can click on it. <span style="color: #ff0000;">ng-click</span> is a directive that allows you to specify custom behavior when an element is clicked. I hit another wall. It would work and sort alphabetically but <em>only from lowest to highest</em>. The click only got each of the columns to sort once, whereas I wanted to go from A-Z on one click but then Z-A on the second click. If you look up the angularjs <a href="https://docs.angularjs.org/api/ng/filter/orderBy" target="_blank">orderBy</a> information, you will see that you can give it an expression followed by a ‘<span style="color: #ff0000;">:reverse</span>’. If you scroll down you'll see that reverse is a boolean that will reverse the order of an array. So we had some adjustments to do. First being, that I had to add the reverse field to the model.<script src="https://gist.github.com/Sacamano604/9fb626e23fe18778ad21.js"></script>

And then add it to the filter

<script src="https://gist.github.com/Sacamano604/b1cdc59da14ce5918d81.js"></script> Since I didn't put <span style="color: #ff0000;">sortField</span> property within quotes in the <span style="color: #ff0000;">orderBy</span> statement, it will look for a sort field property in the model. So it’s ordering by the <span style="color: #ff0000;">sortField</span> but it’s reversing if the reverse property of the model is ‘true’. Then I had to add the reverse property to my headings.<script src="https://gist.github.com/Sacamano604/687f79b9ec3e3a59bdec.js"></script>

What ‘<span style="color: #ff0000;">reverse = !reverse</span>’ will do is toggle the reverse property being true or false which will, in turn, sort our columns in both orders.

Great! I was done. I created a controller, called upon that controller, moved the script to a second file, pulled in the data from a JSON file, applied the links in the file to the club name as a link to their website, and added sort functionality to each of the columns.

<strong>Source Files:</strong> <a href="https://github.com/Sacamano604/Learning-AngularJS/tree/27e9feb670c56ae065560fa5aeca30a616a187fb" target="_blank">https://github.com/Sacamano604/Learning-AngularJS/tree/27e9feb670c56ae065560fa5aeca30a616a187fb</a><br />
<strong>Working Application:</strong> <a href="http://bentoussi.com/angularjs/day04/" target="_blank">http://bentoussi.com/angularjs/day04/</a>